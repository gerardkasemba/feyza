(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44193:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),t(41167),t(32029),t(35866);var r=t(23191),l=t(88716),a=t(37922),i=t.n(a),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,41167)),"C:\\Users\\GerardKasemba\\feyza\\src\\app\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32029)),"C:\\Users\\GerardKasemba\\feyza\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\GerardKasemba\\feyza\\src\\app\\dashboard\\page.tsx"],x="/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},62364:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,92481,23)),Promise.resolve().then(t.t.bind(t,79404,23)),Promise.resolve().then(t.bind(t,41222)),Promise.resolve().then(t.bind(t,65112)),Promise.resolve().then(t.bind(t,16681)),Promise.resolve().then(t.bind(t,97162)),Promise.resolve().then(t.bind(t,8585)),Promise.resolve().then(t.bind(t,24263)),Promise.resolve().then(t.bind(t,40481)),Promise.resolve().then(t.bind(t,62333)),Promise.resolve().then(t.bind(t,80516)),Promise.resolve().then(t.bind(t,84794)),Promise.resolve().then(t.bind(t,36653)),Promise.resolve().then(t.bind(t,28676)),Promise.resolve().then(t.bind(t,92520)),Promise.resolve().then(t.bind(t,20603))},83113:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(36478).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},94126:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(36478).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},41167:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var r=t(19510),l=t(58585),a=t(57371),i=t(65655),n=t(89523),d=t(20418),o=t(38063),c=t(29565),x=t(2157),m=t(40644),u=t(94126),h=t(36478);let p=(0,h.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);var g=t(15064),b=t(72008),f=t(14120),j=t(767);let v=(0,h.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var y=t(26359);let N=(0,h.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var w=t(83113);async function _(){let e=await (0,i.f)(),{data:{user:s}}=await e.auth.getUser();s||(0,l.redirect)("/auth/signin");let t=null;try{let{data:r}=await e.from("users").select("*").eq("id",s.id).single();t=r}catch(e){console.log("Users table may not exist yet")}let h=[],_=[];try{let{data:t}=await e.from("loans").select("*").eq("borrower_id",s.id).order("created_at",{ascending:!1});h=t||[]}catch(e){console.log("Loans table may not exist yet")}try{let{data:t}=await e.from("loans").select("*").eq("lender_id",s.id).order("created_at",{ascending:!1});_=t||[]}catch(e){console.log("Loans table may not exist yet")}let P=null;try{let{data:t}=await e.from("business_profiles").select("id, business_name, profile_completed, is_verified, verification_status, slug, public_profile_enabled").eq("user_id",s.id).single();if(P=t){let{data:s}=await e.from("loans").select("*").eq("business_lender_id",P.id).order("created_at",{ascending:!1});_=[..._,...s||[]]}}catch(e){}let Z=h.filter(e=>"active"===e.status),q=_.filter(e=>"active"===e.status),z=h.filter(e=>"pending"===e.status),S=Z.reduce((e,s)=>e+(s.amount_remaining||0),0),D=q.reduce((e,s)=>e+(s.amount_remaining||0),0),T=e=>{let s=new Date(e),t=s.getDay(),r=s.getDate()-t+(0===t?-6:1);return new Date(s.setDate(r))},$=e=>{let s=T(e),t=new Date(s);return t.setDate(s.getDate()+5),t},A=0,G=0;try{let s=new Date,t=T(s);t.setHours(0,0,0,0);let r=$(s);r.setHours(23,59,59,999);let l=t.toISOString().split("T")[0],a=r.toISOString().split("T")[0],i=Z.map(e=>e.id);if(i.length>0){let{data:s,error:t}=await e.from("payment_schedule").select("id, amount, due_date").in("loan_id",i).eq("is_paid",!1).gte("due_date",l).lte("due_date",a+"T23:59:59");t&&console.log("Error fetching borrower schedules:",t),A=s?.length||0,G=s?.reduce((e,s)=>e+(s.amount||0),0)||0}}catch(e){console.log("Error calculating due this week:",e)}let L=0,C=0;try{let s=new Date,t=T(s);t.setHours(0,0,0,0);let r=$(s);r.setHours(23,59,59,999);let l=t.toISOString().split("T")[0],a=r.toISOString().split("T")[0],i=q.map(e=>e.id);if(i.length>0){let{data:s,error:t}=await e.from("payment_schedule").select("id, amount, due_date").in("loan_id",i).eq("is_paid",!1).gte("due_date",l).lte("due_date",a+"T23:59:59");t&&console.log("Error fetching lender schedules:",t),L=s?.length||0,C=s?.reduce((e,s)=>e+(s.amount||0),0)||0}}catch(e){console.log("Error calculating expected this week:",e)}let E=t||{id:s.id,email:s.email||"",full_name:s.user_metadata?.full_name||"User",user_type:s.user_metadata?.user_type||"individual"};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-neutral-50",children:[r.jsx(n.w,{user:E}),r.jsx("main",{className:"flex-1",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-display font-bold text-neutral-900",children:["Welcome back, ",E.full_name?.split(" ")[0]," \uD83D\uDC4B"]}),r.jsx("p",{className:"text-neutral-500 mt-1",children:"Here's your loan overview"})]}),r.jsx(a.default,{href:"/loans/new",children:(0,r.jsxs)(d.zx,{children:[r.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Request Loan"]})})]}),"individual"===E.user_type&&t?.verification_status!=="verified"&&r.jsx("div",{className:`mb-6 p-4 rounded-xl border ${t?.verification_status==="submitted"?"bg-blue-50 border-blue-200":t?.verification_status==="rejected"?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${t?.verification_status==="submitted"?"bg-blue-100":t?.verification_status==="rejected"?"bg-red-100":"bg-yellow-100"}`,children:r.jsx(p,{className:`w-5 h-5 ${t?.verification_status==="submitted"?"text-blue-600":t?.verification_status==="rejected"?"text-red-600":"text-yellow-600"}`})}),r.jsx("div",{className:"flex-1",children:t?.verification_status==="submitted"?(0,r.jsxs)(r.Fragment,{children:[r.jsx("h3",{className:"font-semibold text-blue-800 mb-1",children:"Verification In Progress"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Your documents are being reviewed. This usually takes 1-2 business days."})]}):t?.verification_status==="rejected"?(0,r.jsxs)(r.Fragment,{children:[r.jsx("h3",{className:"font-semibold text-red-800 mb-1",children:"Verification Rejected"}),r.jsx("p",{className:"text-sm text-red-700 mb-3",children:t?.verification_notes||"Your verification was rejected. Please resubmit with valid documents."}),r.jsx(a.default,{href:"/verify",children:r.jsx(d.zx,{size:"sm",variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-100",children:"Resubmit Verification"})})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("h3",{className:"font-semibold text-yellow-800 mb-1",children:"Complete Your Verification"}),r.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"Verify your identity, employment, and address to start borrowing. This helps lenders trust you."}),r.jsx(a.default,{href:"/verify",children:(0,r.jsxs)(d.zx,{size:"sm",children:[r.jsx(p,{className:"w-4 h-4 mr-2"}),"Start Verification"]})})]})})]})}),"individual"===E.user_type&&t?.verification_status==="verified"&&r.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(g.Z,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"text-sm text-green-700 font-medium",children:"✓ Your identity is verified - You can now request loans from businesses"})]})}),"business"===E.user_type&&!P&&r.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-primary-50 dark:from-green-900/20 dark:to-primary-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(b.Z,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-1",children:"Complete Your Business Profile"}),r.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mb-3",children:"Set up your business lender profile to start receiving loan requests from verified borrowers."}),r.jsx(a.default,{href:"/business/setup",children:(0,r.jsxs)(d.zx,{size:"sm",children:[r.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Complete Setup"]})})]})]})}),P&&P.profile_completed&&"pending"===P.verification_status&&r.jsx("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(f.Z,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-1",children:"Application Under Review"}),(0,r.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["Your business profile for ",r.jsx("strong",{children:P.business_name})," is being reviewed. This usually takes 1-2 business days. We'll email you once it's approved!"]})]})]})}),P&&"approved"===P.verification_status&&r.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(g.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),(0,r.jsxs)("span",{className:"text-sm text-green-700 dark:text-green-400 font-medium",children:["✓ ",r.jsx("strong",{children:P.business_name})," is verified and active"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(a.default,{href:"/lender/preferences",children:r.jsx(d.zx,{variant:"outline",size:"sm",children:"Lender Settings"})}),r.jsx(a.default,{href:"/business",children:r.jsx(d.zx,{size:"sm",children:"Business Dashboard"})})]})]})}),P&&"rejected"===P.verification_status&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(j.Z,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-1",children:"Business Application Not Approved"}),(0,r.jsxs)("p",{className:"text-sm text-red-700 dark:text-red-400 mb-3",children:["Your application for ",r.jsx("strong",{children:P.business_name})," was not approved. Please contact support for more information or to resubmit."]}),r.jsx("a",{href:"mailto:support@feyza.app",children:r.jsx(d.zx,{variant:"outline",size:"sm",className:"border-red-300 text-red-700 hover:bg-red-100 dark:border-red-700 dark:text-red-400 dark:hover:bg-red-900/30",children:"Contact Support"})})]})]})}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-4 gap-4 mb-8",children:[r.jsx("div",{className:"lg:col-span-3",children:(0,r.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(o.Ai,{title:"Total Borrowed",value:(0,m.xG)(S),subtitle:`${Z.length} active loan${1!==Z.length?"s":""}`,icon:v}),r.jsx(o.Ai,{title:"Total Lent",value:(0,m.xG)(D),subtitle:`${q.length} active loan${1!==q.length?"s":""}`,icon:y.Z}),r.jsx(o.Ai,{title:"Due This Week",value:A>0?(0,m.xG)(G):"0",subtitle:A>0?`${A} payment${1!==A?"s":""} to make`:"No payments due",icon:j.Z,highlight:A>0}),r.jsx(o.Ai,{title:"Expected This Week",value:L>0?(0,m.xG)(C):"0",subtitle:L>0?`${L} payment${1!==L?"s":""} incoming`:"No payments expected",icon:f.Z})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx(c.E,{})})]}),(0,r.jsxs)(d.mQ,{defaultValue:"borrowed",className:"mb-8",children:[(0,r.jsxs)(d.dr,{className:"mb-6",children:[(0,r.jsxs)(d.SP,{value:"borrowed",className:"relative",children:["Borrowed",Z.length>0&&r.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-primary-100 text-primary-700 rounded-full",children:Z.length})]}),(0,r.jsxs)(d.SP,{value:"lent",className:"relative",children:["Lent",q.length>0&&r.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full",children:q.length})]}),(0,r.jsxs)(d.SP,{value:"pending",className:"relative",children:["Pending",z.length>0&&r.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-yellow-100 text-yellow-700 rounded-full",children:z.length})]})]}),r.jsx(d.nU,{value:"borrowed",children:Z.length>0?r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.map(e=>r.jsx(x.h$,{loan:{...e,lender:e.lender||e.business_lender},role:"borrower"},e.id))}):r.jsx(k,{title:"No active loans",description:"You don't have any active loans as a borrower",actionLabel:"Request a Loan",actionHref:"/loans/new"})}),r.jsx(d.nU,{value:"lent",children:q.length>0?r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(e=>r.jsx(x.h$,{loan:e,role:"lender"},e.id))}):r.jsx(k,{title:"No loans lent",description:"You haven't lent any money yet"})}),r.jsx(d.nU,{value:"pending",children:z.length>0?r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(e=>r.jsx(x.h$,{loan:{...e,lender:e.lender||e.business_lender},role:"borrower"},e.id))}):r.jsx(k,{title:"No pending requests",description:"All your loan requests have been processed"})})]}),(0,r.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(a.default,{href:"/loans/new",children:r.jsx(d.Zb,{hover:!0,className:"group",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-primary-100 rounded-xl group-hover:bg-primary-200 transition-colors",children:r.jsx(u.Z,{className:"w-6 h-6 text-primary-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-neutral-900",children:"Request a Loan"}),r.jsx("p",{className:"text-sm text-neutral-500",children:"From business or personal network"})]}),r.jsx(N,{className:"w-5 h-5 text-neutral-400 group-hover:text-primary-600 transition-colors"})]})})}),r.jsx(a.default,{href:"/loans",children:r.jsx(d.Zb,{hover:!0,className:"group",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:bg-blue-200 transition-colors",children:r.jsx(w.Z,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-neutral-900",children:"View All Loans"}),r.jsx("p",{className:"text-sm text-neutral-500",children:"See your complete history"})]}),r.jsx(N,{className:"w-5 h-5 text-neutral-400 group-hover:text-blue-600 transition-colors"})]})})}),"business"===E.user_type&&r.jsx(a.default,{href:"/business",children:r.jsx(d.Zb,{hover:!0,className:"group",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-accent-100 rounded-xl group-hover:bg-accent-200 transition-colors",children:r.jsx(y.Z,{className:"w-6 h-6 text-accent-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-neutral-900",children:"Business Dashboard"}),r.jsx("p",{className:"text-sm text-neutral-500",children:"Manage your lending business"})]}),r.jsx(N,{className:"w-5 h-5 text-neutral-400 group-hover:text-accent-600 transition-colors"})]})})})]})]})}),r.jsx(n.$,{})]})}function k({title:e,description:s,actionLabel:t,actionHref:l}){return(0,r.jsxs)(d.Zb,{className:"text-center py-12",children:[r.jsx(w.Z,{className:"w-12 h-12 text-neutral-300 mx-auto mb-4"}),r.jsx("h3",{className:"font-semibold text-neutral-900 mb-2",children:e}),r.jsx("p",{className:"text-neutral-500 mb-6",children:s}),t&&l&&r.jsx(a.default,{href:l,children:r.jsx(d.zx,{children:t})})]})}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9276,3786,9702,1199,8596,861,9821,4723,2401,1402,6681,2333,9668,389],()=>t(44193));module.exports=r})();