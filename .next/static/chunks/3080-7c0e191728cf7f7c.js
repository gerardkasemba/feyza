"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3080],{6858:function(e,t,s){s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2135:function(e,t,s){s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},6362:function(e,t,s){s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},7689:function(e,t,s){s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},5131:function(e,t,s){s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2151:function(e,t,s){s.d(t,{LoanAgreement:function(){return x}});var a=s(7437),n=s(2265),l=s(2573),r=s(401),i=s(8736),c=s(2135),o=s(875),d=s(3639),m=s(3448);function x(e){let{loanDetails:t,borrowerName:s,onSign:x,isSigning:h=!1,role:u,alreadySigned:p=!1}=e,[j,g]=(0,n.useState)(!1),[f,b]=(0,n.useState)(!1);return p?(0,a.jsx)(l.Zb,{className:"bg-green-50 border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(r.Z,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-900",children:"Agreement Signed"}),(0,a.jsx)("p",{className:"text-sm text-green-700",children:"You have signed this loan agreement."})]})]})}):(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"w-6 h-6 text-primary-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-neutral-900",children:"Loan Agreement"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Please review and sign the agreement to proceed"})]})]}),(0,a.jsxs)("div",{className:"bg-neutral-50 rounded-xl p-4 mb-4",children:[(0,a.jsx)("h4",{className:"font-medium text-neutral-900 mb-3",children:"Key Terms"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Principal Amount:"}),(0,a.jsx)("p",{className:"font-medium",children:(0,m.xG)(t.amount,t.currency)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Total to Repay:"}),(0,a.jsx)("p",{className:"font-medium",children:(0,m.xG)(t.totalAmount,t.currency)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Interest Rate:"}),(0,a.jsxs)("p",{className:"font-medium",children:[t.interestRate,"% APR"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Installments:"}),(0,a.jsxs)("p",{className:"font-medium",children:[t.totalInstallments," payments of ",(0,m.xG)(t.repaymentAmount,t.currency)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Start Date:"}),(0,a.jsx)("p",{className:"font-medium",children:new Date(t.startDate).toLocaleDateString()})]}),t.purpose&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Purpose:"}),(0,a.jsx)("p",{className:"font-medium",children:t.purpose})]})]})]}),(0,a.jsxs)("div",{className:"border border-neutral-200 rounded-xl mb-4",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>g(!j),className:"w-full flex items-center justify-between p-4 text-left",children:[(0,a.jsx)("span",{className:"font-medium text-neutral-900",children:"Full Terms & Conditions"}),j?(0,a.jsx)(c.Z,{className:"w-5 h-5 text-neutral-400"}):(0,a.jsx)(o.Z,{className:"w-5 h-5 text-neutral-400"})]}),j&&(0,a.jsxs)("div",{className:"px-4 pb-4 text-sm text-neutral-600 space-y-3 max-h-64 overflow-y-auto",children:[(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"1. Loan Agreement"})}),(0,a.jsxs)("p",{children:["This agreement is entered into between the Borrower (",s,") and the Lender for a loan in the principal amount of ",(0,m.xG)(t.amount,t.currency),"."]}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"2. Repayment Terms"})}),(0,a.jsxs)("p",{children:["The Borrower agrees to repay the total amount of ",(0,m.xG)(t.totalAmount,t.currency),"in ",t.totalInstallments," installments of ",(0,m.xG)(t.repaymentAmount,t.currency)," each, beginning on ",new Date(t.startDate).toLocaleDateString(),"."]}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"3. Interest Rate"})}),(0,a.jsxs)("p",{children:["The annual interest rate for this loan is ",t.interestRate,"%. The total interest over the loan term is ",(0,m.xG)(t.totalAmount-t.amount,t.currency),"."]}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"4. Late Payments"})}),(0,a.jsx)("p",{children:"If a payment is not received by the due date, the Borrower agrees to communicate with the Lender to arrange alternative payment arrangements. Both parties agree to act in good faith to resolve any payment issues."}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"5. Early Repayment"})}),(0,a.jsx)("p",{children:"The Borrower may repay the loan in full or make additional payments at any time without penalty."}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"6. Communication"})}),(0,a.jsx)("p",{children:"Both parties agree to communicate through the Feyza platform and respond to messages within a reasonable timeframe."}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"7. Dispute Resolution"})}),(0,a.jsx)("p",{children:"In the event of a dispute, both parties agree to attempt to resolve the matter amicably before seeking external mediation or legal action."}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"8. Digital Signatures"})}),(0,a.jsx)("p",{children:"Both parties acknowledge that digital signatures on this platform are legally binding and equivalent to handwritten signatures."})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-xl mb-4",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-yellow-900",children:"Important"}),(0,a.jsx)("p",{className:"text-yellow-700",children:"By signing this agreement, you acknowledge that you have read, understood, and agree to be bound by all terms and conditions. This is a legally binding agreement."})]})]}),(0,a.jsxs)("label",{className:"flex items-start gap-3 mb-4 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:f,onChange:e=>b(e.target.checked),className:"mt-1 w-4 h-4 text-primary-600 rounded border-neutral-300 focus:ring-primary-500"}),(0,a.jsx)("span",{className:"text-sm text-neutral-700",children:"I have read and agree to the terms and conditions of this loan agreement. I understand that this is a legally binding commitment."})]}),(0,a.jsxs)(l.zx,{onClick:x,disabled:!f||h,loading:h,className:"w-full",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),"Sign Agreement as ","borrower"===u?"Borrower":"Lender"]})]})}},6768:function(e,t,s){s.d(t,{LoanCard:function(){return m}});var a=s(7437);s(2265);var n=s(7648),l=s(2573),r=s(3448),i=s(2252),c=s(5302),o=s(1047),d=s(6858);function m(e){let t,{loan:s,role:m}=e,x=(0,r.VO)(s.amount_paid,s.amount),h="borrower"===m?s.lender:s.borrower;t=h?"business_name"in h?h.business_name:h.full_name:"borrower"===m?s.invite_accepted?s.invite_email||"Your Lender":s.invite_email||"Pending acceptance":s.borrower_invite_email||"Borrower";let u={pending:s.invite_accepted?"Setting up terms":"Pending Acceptance",pending_funds:"Awaiting Funds",pending_disbursement:"Processing",active:"Active",completed:"Completed",declined:"Declined",cancelled:"Cancelled"},p="active"===s.status&&!s.funds_sent&&"lender"===m,j="active"===s.status&&!s.funds_sent&&"borrower"===m;return(0,a.jsx)(n.default,{href:"/loans/".concat(s.id),className:"block h-full",children:(0,a.jsxs)(l.Zb,{hover:!0,className:"group h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-3 sm:mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[(0,a.jsx)(l.qE,{name:t,size:"md",className:"flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-neutral-900 truncate",title:t,children:t}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-neutral-500",children:"borrower"===m?"Lender":"Borrower"})]})]}),(0,a.jsx)(l.Ct,{variant:{pending:"warning",pending_funds:"warning",pending_disbursement:"info",active:"success",completed:"info",declined:"danger",cancelled:"default"}[s.status],className:"flex-shrink-0",children:u[s.status]})]}),(0,a.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,a.jsxs)("div",{className:"flex items-baseline justify-between gap-2 mb-1",children:[(0,a.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-neutral-900 truncate",children:(0,r.xG)(s.amount,s.currency)}),(0,a.jsx)("span",{className:"text-xs sm:text-sm text-neutral-500 flex-shrink-0",children:"borrower"===m?"borrowed":"lent"})]}),s.purpose&&(0,a.jsx)("p",{className:"text-xs sm:text-sm text-neutral-600 line-clamp-1",children:s.purpose})]}),(0,a.jsxs)("div",{className:"flex-grow",children:[p&&(0,a.jsx)("div",{className:"mb-3 sm:mb-4 p-2 sm:p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-yellow-800",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium truncate",children:"Action needed: Send PayPal payment"})]})}),j&&(0,a.jsx)("div",{className:"mb-3 sm:mb-4 p-2 sm:p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-blue-800",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium truncate",children:"Waiting for lender's payment"})]})}),"active"===s.status&&s.funds_sent&&(0,a.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-green-600 mb-2",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{children:"Payment sent"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs sm:text-sm mb-2 gap-2",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Repaid"}),(0,a.jsxs)("span",{className:"font-medium text-neutral-700 truncate text-right",children:[(0,r.xG)(s.amount_paid,s.currency)," of ",(0,r.xG)(s.total_amount||s.amount,s.currency)]})]}),(0,a.jsx)(l.Ex,{value:x})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 sm:pt-4 border-t border-neutral-100 mt-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-neutral-500 min-w-0",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:(0,r.p6)(s.created_at)})]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs sm:text-sm font-medium text-primary-600 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:["View details",(0,a.jsx)(d.Z,{className:"w-4 h-4"})]})]})]})})}},3956:function(e,t,s){s.d(t,{LoanContract:function(){return m}});var a=s(7437),n=s(2265),l=s(2573),r=s(8736),i=s(401),c=s(1723),o=s(6362),d=s(3448);function m(e){let{loan:t,userRole:s,onSign:m}=e,[x,h]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),j=t.borrower_signed,g=t.lender_signed,f=async()=>{p(!0);try{await m(),h(!1)}finally{p(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Zb,{children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(r.Z,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-neutral-900 mb-1",children:"Loan Agreement"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500 mb-3",children:j&&g?"Contract signed by both parties":"Both parties must sign the contract to activate the loan"}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[j?(0,a.jsx)(i.Z,{className:"w-4 h-4 text-green-500"}):(0,a.jsx)(c.Z,{className:"w-4 h-4 text-yellow-500"}),(0,a.jsxs)("span",{className:j?"text-green-700":"text-yellow-700",children:["Borrower: ",j?"Signed on ".concat((0,d.p6)(t.borrower_signed_at)):"Pending signature"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[g?(0,a.jsx)(i.Z,{className:"w-4 h-4 text-green-500"}):(0,a.jsx)(c.Z,{className:"w-4 h-4 text-yellow-500"}),(0,a.jsxs)("span",{className:g?"text-green-700":"text-yellow-700",children:["Lender: ",g?"Signed on ".concat((0,d.p6)(t.lender_signed_at)):"Pending signature"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(l.zx,{variant:"outline",size:"sm",onClick:()=>{window.open("/api/contracts?loanId=".concat(t.id),"_blank")},children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),"View Contract"]}),!("borrower"===s?j:g)&&"pending"===t.status&&(0,a.jsxs)(l.zx,{size:"sm",onClick:()=>h(!0),children:[(0,a.jsx)(r.Z,{className:"w-4 h-4 mr-1"}),"Sign Contract"]})]})]})]})}),(0,a.jsx)(l.u_,{isOpen:x,onClose:()=>h(!1),title:"Sign Loan Agreement",size:"lg",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-neutral-50 rounded-xl p-4 max-h-96 overflow-y-auto",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Key Terms"}),(0,a.jsxs)("ul",{className:"text-sm space-y-2 text-neutral-600",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Principal Amount:"})," ",t.currency," ",t.amount.toLocaleString()]}),t.interest_rate>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Interest Rate:"})," ",t.interest_rate,"% APR (",t.interest_type,")"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Total Interest:"})," ",t.currency," ",t.total_interest.toLocaleString()]})]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Total to Repay:"})," ",t.currency," ",t.total_amount.toLocaleString()]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Installments:"})," ",t.total_installments," payments of ",t.currency," ",t.repayment_amount.toLocaleString()]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Frequency:"})," ",t.repayment_frequency]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Start Date:"})," ",(0,d.p6)(t.start_date)]})]})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-sm text-yellow-800",children:(0,a.jsx)("strong",{children:"By signing this agreement:"})}),(0,a.jsx)("ul",{className:"text-sm text-yellow-700 mt-2 space-y-1",children:"borrower"===s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{children:"• You agree to repay the loan according to the schedule"}),(0,a.jsx)("li",{children:"• You authorize automatic payments if enabled"}),(0,a.jsx)("li",{children:"• You confirm all information provided is accurate"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{children:"• You agree to disburse the loan amount to the borrower"}),(0,a.jsx)("li",{children:"• You accept the repayment terms specified"}),(0,a.jsx)("li",{children:"• You will receive payments according to the schedule"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-neutral-100 rounded-xl",children:[(0,a.jsx)("input",{type:"checkbox",id:"agree",className:"w-4 h-4",required:!0}),(0,a.jsx)("label",{htmlFor:"agree",className:"text-sm text-neutral-700",children:"I have read and agree to the terms of this loan agreement"})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)(l.zx,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,a.jsxs)(l.zx,{onClick:f,loading:u,children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 mr-1"}),"Sign as ","borrower"===s?"Borrower":"Lender"]})]})]})})]})}},6289:function(e,t,s){s.d(t,{LoanTimeline:function(){return o}});var a=s(7437);s(2265);var n=s(3448),l=s(401);let r=(0,s(9763).Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var i=s(1723),c=s(2252);function o(e){let{schedule:t,currency:s,onMarkPaid:o,showBreakdown:d=!0}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-5 top-0 bottom-0 w-0.5 bg-neutral-200"}),(0,a.jsx)("div",{className:"space-y-4",children:t.map((e,m)=>{let x=(0,n.yv)(e.due_date,e.is_paid);t.length;let h=e.interest_amount&&e.interest_amount>0,u={paid:{icon:l.Z,bgColor:"bg-green-500",textColor:"text-green-700",label:"Paid"},upcoming:{icon:r,bgColor:"bg-neutral-200",textColor:"text-neutral-500",label:"Upcoming"},due:{icon:i.Z,bgColor:"bg-yellow-500",textColor:"text-yellow-700",label:"Due soon"},overdue:{icon:c.Z,bgColor:"bg-red-500",textColor:"text-red-700",label:"Overdue"}}[x],p=u.icon;return(0,a.jsxs)("div",{className:"relative flex items-start gap-4 pl-2",children:[(0,a.jsx)("div",{className:(0,n.cn)("relative z-10 w-6 h-6 rounded-full flex items-center justify-center",u.bgColor),children:(0,a.jsx)(p,{className:(0,n.cn)("w-3.5 h-3.5","text-white")})}),(0,a.jsxs)("div",{className:(0,n.cn)("flex-1 bg-white rounded-xl border p-4 transition-all","overdue"===x?"border-red-200 bg-red-50":"border-neutral-200",!e.is_paid&&o&&"hover:border-primary-300 cursor-pointer"),onClick:()=>!e.is_paid&&o&&o(e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:(0,n.cn)("text-sm font-medium",u.textColor),children:u.label}),(0,a.jsx)("span",{className:"text-sm text-neutral-500",children:(0,n.p6)(e.due_date)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-lg font-bold text-neutral-900",children:(0,n.xG)(e.amount,s)}),d&&h&&(0,a.jsxs)("div",{className:"flex gap-3 mt-1 text-xs text-neutral-500",children:[(0,a.jsxs)("span",{children:["Principal: ",(0,n.xG)(e.principal_amount,s)]}),(0,a.jsxs)("span",{className:"text-orange-600",children:["Interest: ",(0,n.xG)(e.interest_amount,s)]})]})]}),!e.is_paid&&o&&(0,a.jsx)("span",{className:"text-xs text-primary-600 font-medium",children:"Click to mark as paid"})]})]})]},e.id)})})]})}},4160:function(e,t,s){s.d(t,{PaymentModal:function(){return p}});var a=s(7437),n=s(2265),l=s(2573),r=s(3448),i=s(1047),c=s(6362),o=s(6858),d=s(2252),m=s(5302),x=s(5131),h=s(7689);let u={paypal:{name:"PayPal",bg:"bg-[#0070ba]",hoverBg:"hover:bg-[#003087]",icon:(0,a.jsx)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.556.479l-1.187 7.527h-.506l-.24 1.516a.56.56 0 0 0 .554.647h3.882c.46 0 .85-.334.922-.788.06-.26.76-4.852.816-5.09a.932.932 0 0 1 .923-.788h.58c3.76 0 6.705-1.528 7.565-5.946.36-1.847.174-3.388-.777-4.471z"})})},cashapp:{name:"Cash App",bg:"bg-[#00D632]",hoverBg:"hover:bg-[#00B82B]",icon:(0,a.jsx)("span",{className:"text-white font-bold text-2xl",children:"$"})},venmo:{name:"Venmo",bg:"bg-[#3D95CE]",hoverBg:"hover:bg-[#2B7AB5]",icon:(0,a.jsx)("span",{className:"text-white font-bold text-2xl",children:"V"})}};function p(e){let{isOpen:t,onClose:s,scheduleItem:p,currency:j,lenderPayPalEmail:g,lenderName:f,lenderPaymentInfo:b,onSubmit:y}=e,[N,v]=(0,n.useState)("pay"),[w,_]=(0,n.useState)(!1),[k,C]=(0,n.useState)(""),[Z,P]=(0,n.useState)(""),[S,A]=(0,n.useState)(null),[I,L]=(0,n.useState)(null),[B,z]=(0,n.useState)(null);if(!p)return null;let D=p.amount,G=(()=>{let e=b||{paypal_email:g},t=e.preferred_payment_method;return"paypal"===t&&e.paypal_email?{method:"paypal",value:e.paypal_email}:"cashapp"===t&&e.cashapp_username?{method:"cashapp",value:e.cashapp_username}:"venmo"===t&&e.venmo_username?{method:"venmo",value:e.venmo_username}:e.paypal_email?{method:"paypal",value:e.paypal_email}:e.cashapp_username?{method:"cashapp",value:e.cashapp_username}:e.venmo_username?{method:"venmo",value:e.venmo_username}:null})(),R=async()=>{if(!I){A("Please upload a screenshot proof of payment");return}_(!0),A(null);try{let e=G?u[G.method].name:"Unknown";await y({amount:D,note:Z||"".concat(e," payment").concat(k?" - Transaction: ".concat(k):""),proofUrl:k?"".concat(e," Transaction ID: ").concat(k):void 0}),v("pay"),C(""),P(""),L(null),z(null),s()}catch(e){A(e.message||"Failed to record payment")}finally{_(!1)}},T=()=>{v("pay"),C(""),P(""),A(null),L(null),z(null),s()},F=(()=>{if(!G)return null;let e="Loan repayment to ".concat(f||"Lender");switch(G.method){case"paypal":return"https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=".concat(encodeURIComponent(G.value),"&amount=").concat(D,"&currency_code=").concat(j,"&item_name=").concat(encodeURIComponent(e));case"cashapp":return"https://cash.app/".concat(G.value,"/").concat(D);case"venmo":let t=G.value.replace("@","");return"https://venmo.com/".concat(t,"?txn=pay&amount=").concat(D,"&note=").concat(encodeURIComponent(e));default:return null}})(),Y=G?u[G.method]:null;return(0,a.jsxs)(l.u_,{isOpen:t,onClose:T,title:"Make Payment",size:"md",children:["pay"===N&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center py-6 bg-primary-50 rounded-xl",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-500 mb-1",children:"Amount Due"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:(0,r.xG)(D,j)}),(0,a.jsxs)("p",{className:"text-sm text-neutral-500 mt-2 flex items-center justify-center gap-1",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),"Due: ",(0,r.p6)(p.due_date)]})]}),(0,a.jsxs)("div",{className:"bg-neutral-50 rounded-xl p-4 space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Principal"}),(0,a.jsx)("span",{children:(0,r.xG)(p.principal_amount,j)})]}),p.interest_amount>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Interest"}),(0,a.jsx)("span",{children:(0,r.xG)(p.interest_amount,j)})]})]}),G&&Y&&F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-500 mb-2",children:"Pay to:"}),(0,a.jsx)("p",{className:"font-medium text-neutral-900",children:f||"Your Lender"})]}),(0,a.jsxs)("div",{className:"".concat(Y.bg," rounded-xl p-5"),children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:Y.icon}),(0,a.jsxs)("div",{className:"text-white",children:[(0,a.jsxs)("p",{className:"text-white/80 text-sm",children:["via ",Y.name]}),(0,a.jsx)("p",{className:"font-bold text-lg",children:G.value})]})]})}),(0,a.jsxs)("a",{href:F,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-white text-neutral-900 font-bold py-3 px-6 rounded-lg hover:bg-neutral-100 transition-colors",children:["Pay ",(0,r.xG)(D,j),(0,a.jsx)(c.Z,{className:"w-4 h-4"})]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-sm text-neutral-500 mb-3",children:["After completing payment in ",Y.name,":"]}),(0,a.jsxs)(l.zx,{variant:"outline",className:"w-full",onClick:()=>v("confirm"),children:["I've completed the payment",(0,a.jsx)(o.Z,{className:"w-4 h-4 ml-2"})]})]})]}):(0,a.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-yellow-800",children:"No payment method available"}),(0,a.jsx)("p",{className:"text-sm text-yellow-700",children:"Your lender hasn't set up a payment method. Please contact them directly to arrange payment."})]})]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(l.zx,{variant:"ghost",onClick:T,children:"Cancel"})})]}),"confirm"===N&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900",children:"Confirm Payment"}),(0,a.jsxs)("p",{className:"text-neutral-500",children:["Did you complete the ",(0,r.xG)(D,j)," payment via ",null==Y?void 0:Y.name,"?"]})]}),(0,a.jsx)(l.II,{label:"".concat((null==Y?void 0:Y.name)||"Transaction"," ID (optional)"),value:k,onChange:e=>C(e.target.value),placeholder:"e.g., 1AB23456CD789012E",helperText:"Found in your ".concat((null==Y?void 0:Y.name)||"payment"," receipt")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Screenshot Proof of Payment *"}),(0,a.jsx)("p",{className:"text-xs text-neutral-500 mb-2",children:"Upload a screenshot showing the completed payment"}),B?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:B,alt:"Payment proof",className:"w-full h-40 object-cover rounded-lg border border-neutral-200"}),(0,a.jsx)("button",{type:"button",onClick:()=>{L(null),z(null)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-neutral-300 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(h.Z,{className:"w-8 h-8 text-neutral-400 mb-2"}),(0,a.jsx)("span",{className:"text-sm text-neutral-500",children:"Click to upload screenshot"}),(0,a.jsx)("span",{className:"text-xs text-neutral-400 mt-1",children:"PNG, JPG up to 5MB"})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){L(s);let e=new FileReader;e.onload=e=>{var t;z(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(s)}}})]})]}),(0,a.jsx)(l.II,{label:"Note (optional)",value:Z,onChange:e=>P(e.target.value),placeholder:"Any additional notes"}),S&&(0,a.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 text-red-500 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-700",children:S})]}),(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:(0,a.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,a.jsx)("strong",{children:"⚠️ Important:"})," Screenshot proof is required. Your lender will be notified and can confirm receipt of this payment."]})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(l.zx,{variant:"outline",className:"flex-1",onClick:()=>v("pay"),children:"Go Back"}),(0,a.jsxs)(l.zx,{className:"flex-1",onClick:R,loading:w,disabled:!I,children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Confirm Payment"]})]})]})]})}}}]);