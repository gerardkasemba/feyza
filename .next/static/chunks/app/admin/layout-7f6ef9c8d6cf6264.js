(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{1557:function(e,t,n){Promise.resolve().then(n.bind(n,2442))},8420:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},407:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8736:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},7692:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},8293:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},8728:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8906:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},5805:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,n){"use strict";var a=n(5475);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},2442:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var a=n(7437),r=n(2265),i=n(7648),s=n(9376),l=n(8933),u=n(3448);let c=(0,n(9763).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var o=n(5805),d=n(8736),h=n(8420),f=n(8728),m=n(8906),x=n(2489),y=n(8293),p=n(407),v=n(7692);let g=[{href:"/admin",label:"Dashboard",icon:c},{href:"/admin/users",label:"Users",icon:o.Z},{href:"/admin/loans",label:"Loans",icon:d.Z},{href:"/admin/businesses",label:"Businesses",icon:h.Z},{href:"/admin/settings",label:"Settings",icon:f.Z}];function k(e){var t;let{children:n}=e,c=(0,s.usePathname)(),o=(0,s.useRouter)(),[d,h]=(0,r.useState)(!1),[f,k]=(0,r.useState)(null),[b,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{let e=(0,l.e)(),{data:{user:t}}=await e.auth.getUser();if(!t){o.push("/auth/signin");return}let{data:n}=await e.from("users").select("*").eq("id",t.id).single();if(!(null==n?void 0:n.is_admin)){o.push("/dashboard");return}k(n),j(!0),N(!1)})()},[o]);let Z=async()=>{let e=(0,l.e)();await e.auth.signOut(),o.push("/")};return w?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-neutral-900",children:(0,a.jsx)("div",{className:"text-white",children:"Loading..."})}):b?(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100",children:[(0,a.jsxs)("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-neutral-900 text-white flex items-center justify-between px-4 z-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("span",{className:"font-bold",children:"Admin"})]}),(0,a.jsx)("button",{onClick:()=>h(!d),className:"p-2 hover:bg-neutral-800 rounded-lg",children:d?(0,a.jsx)(x.Z,{className:"w-5 h-5"}):(0,a.jsx)(y.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("aside",{className:(0,u.cn)("fixed inset-y-0 left-0 w-64 bg-neutral-900 text-white transform transition-transform duration-200 ease-in-out z-40","lg:translate-x-0",d?"translate-x-0":"-translate-x-full"),children:[(0,a.jsxs)("div",{className:"h-16 flex items-center gap-3 px-6 border-b border-neutral-800",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-bold text-lg",children:"Feyza"}),(0,a.jsx)("span",{className:"text-xs text-neutral-400 block",children:"Admin Panel"})]})]}),(0,a.jsx)("nav",{className:"p-4 space-y-1",children:g.map(e=>{let t=c===e.href||"/admin"!==e.href&&c.startsWith(e.href);return(0,a.jsxs)(i.default,{href:e.href,onClick:()=>h(!1),className:(0,u.cn)("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",t?"bg-primary-500/20 text-primary-400":"text-neutral-400 hover:bg-neutral-800 hover:text-white"),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),e.label,t&&(0,a.jsx)(p.Z,{className:"w-4 h-4 ml-auto"})]},e.href)})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-neutral-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 mb-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-neutral-700 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:(null==f?void 0:null===(t=f.full_name)||void 0===t?void 0:t.charAt(0))||"A"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:(null==f?void 0:f.full_name)||"Admin"}),(0,a.jsx)("p",{className:"text-xs text-neutral-400 truncate",children:null==f?void 0:f.email})]})]}),(0,a.jsxs)("button",{onClick:Z,className:"flex items-center gap-3 w-full px-4 py-2 text-neutral-400 hover:text-white hover:bg-neutral-800 rounded-lg transition-colors",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),"Sign Out"]})]})]}),(0,a.jsx)("main",{className:"lg:ml-64 pt-16 lg:pt-0 min-h-screen",children:n}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>h(!1)})]}):null}},8933:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var a=n(4033);function r(){return(0,a.createBrowserClient)("https://mregojhoivbxdvgjrixz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1yZWdvamhvaXZieGR2Z2pyaXh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc1ODE1NDQsImV4cCI6MjA4MzE1NzU0NH0.I_jEMf00cFYAdF0akvD-HOqXWExxO3E0BV69EHEa5jI")}},3448:function(e,t,n){"use strict";n.d(t,{K2:function(){return v},QT:function(){return y},U6:function(){return g},VO:function(){return x},aT:function(){return p},cn:function(){return c},p6:function(){return d},rl:function(){return f},xG:function(){return o},yv:function(){return m},zg:function(){return h}});var a=n(1994),r=n(3335),i=n(2093),s=n(5710),l=n(9121),u=n(3430);function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,a.W)(t))}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(e)}function d(e){return(0,i.WU)(new Date(e),"MMM d, yyyy")}function h(e){return(0,s.Q)(new Date(e),{addSuffix:!0})}function f(e){return"".concat(e.toFixed(2),"%")}function m(e,t){if(t)return"paid";let n=new Date(e),a=new Date,r=(0,l.E)(a,3);return(0,u.R)(n,a)?"overdue":(0,u.R)(n,r)?"due":"upcoming"}function x(e,t){return 0===t?0:Math.round(e/t*100)}function y(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function p(e,t,n,a){return 0===t?0:"simple"===a?t/100/12*e*n:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12;return e*Math.pow(1+t/100/a,n/12*a)-e}(e,t,n)}function v(e,t){switch(t){case"weekly":return e/4.33;case"biweekly":return e/2.17;default:return e}}function g(e){let{amount:t,repaymentAmount:n,totalInstallments:a,startDate:r,frequency:i,interestRate:s=0,interestType:u="simple"}=e,c=[],o=p(t,s,v(a,i),u),d=o/a,h=t/a,f=new Date(r),m=t,x=o;for(let e=0;e<a;e++){let t=e===a-1,n=t?m:Math.min(h,m),r=t?x:Math.min(d,x),s=n+r;switch(c.push({dueDate:new Date(f),amount:Math.round(100*s)/100,principalAmount:Math.round(100*n)/100,interestAmount:Math.round(100*r)/100}),m-=n,x-=r,i){case"weekly":f=(0,l.E)(f,7);break;case"biweekly":f=(0,l.E)(f,14);break;case"monthly":f.setMonth(f.getMonth()+1);break;default:f=(0,l.E)(f,30)}}return c}}},function(e){e.O(0,[1114,7648,4033,2971,2117,1744],function(){return e(e.s=1557)}),_N_E=e.O()}]);