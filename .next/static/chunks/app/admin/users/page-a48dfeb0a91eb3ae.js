(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{7378:function(e,t,s){Promise.resolve().then(s.bind(s,5351))},8420:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2451:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8906:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5351:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var n=s(7437),r=s(2265),a=s(8933),l=s(3448),i=s(3247),d=s(740),c=s(8906),u=s(8420),o=s(2369),x=s(5302),m=s(2208);let h=(0,s(9763).Z)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var p=s(2451),f=s(407);function g(){let[e,t]=(0,r.useState)([]),[s,g]=(0,r.useState)(!0),[b,j]=(0,r.useState)(""),[N,y]=(0,r.useState)("all"),[v,w]=(0,r.useState)(1),[k,_]=(0,r.useState)(0),[Z,M]=(0,r.useState)(null),[S,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{I()},[v,N,b]);let I=async()=>{g(!0);let e=(0,a.e)().from("users").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range((v-1)*20,20*v-1);"individual"===N?e=e.eq("user_type","individual"):"business"===N?e=e.eq("user_type","business"):"admin"===N&&(e=e.eq("is_admin",!0)),b&&(e=e.or("full_name.ilike.%".concat(b,"%,email.ilike.%").concat(b,"%")));let{data:s,count:n,error:r}=await e;r?console.error("Error fetching users:",r):(t(s||[]),_(n||0)),g(!1)},E=async(s,n)=>{let r=(0,a.e)(),{error:l}=await r.from("users").update({is_suspended:!n}).eq("id",s);l||t(e.map(e=>e.id===s?{...e,is_suspended:!n}:e))},U=async(s,n)=>{let r=(0,a.e)(),{error:l}=await r.from("users").update({is_admin:!n}).eq("id",s);l||t(e.map(e=>e.id===s?{...e,is_admin:!n}:e))},D=Math.ceil(k/20);return(0,n.jsxs)("div",{className:"p-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-neutral-900",children:"Users"}),(0,n.jsx)("p",{className:"text-neutral-500",children:"Manage all users on the platform"})]}),(0,n.jsx)("div",{className:"bg-white rounded-xl border border-neutral-200 p-4 mb-6",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,n.jsxs)("div",{className:"flex-1 relative",children:[(0,n.jsx)(i.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),(0,n.jsx)("input",{type:"text",placeholder:"Search users...",value:b,onChange:e=>{j(e.target.value),w(1)},className:"w-full pl-10 pr-4 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.Z,{className:"w-5 h-5 text-neutral-400"}),(0,n.jsxs)("select",{value:N,onChange:e=>{y(e.target.value),w(1)},className:"px-4 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,n.jsx)("option",{value:"all",children:"All Users"}),(0,n.jsx)("option",{value:"individual",children:"Individuals"}),(0,n.jsx)("option",{value:"business",children:"Businesses"}),(0,n.jsx)("option",{value:"admin",children:"Admins"})]})]})]})}),(0,n.jsxs)("div",{className:"bg-white rounded-xl border border-neutral-200 overflow-hidden",children:[(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-neutral-600",children:"User"}),(0,n.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-neutral-600",children:"Type"}),(0,n.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-neutral-600",children:"Status"}),(0,n.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-neutral-600",children:"Rating"}),(0,n.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-neutral-600",children:"Joined"}),(0,n.jsx)("th",{className:"text-right px-6 py-4 text-sm font-medium text-neutral-600",children:"Actions"})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-neutral-100",children:s?[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,className:"px-6 py-4",children:(0,n.jsx)("div",{className:"h-10 bg-neutral-100 rounded animate-pulse"})})},t)):0===e.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-neutral-500",children:"No users found"})}):e.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-neutral-50",children:[(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.is_admin?"bg-amber-100":"bg-primary-100"),children:e.is_admin?(0,n.jsx)(c.Z,{className:"w-5 h-5 text-amber-600"}):"business"===e.user_type?(0,n.jsx)(u.Z,{className:"w-5 h-5 text-primary-600"}):(0,n.jsx)(o.Z,{className:"w-5 h-5 text-primary-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium text-neutral-900",children:e.full_name||"Unknown"}),(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:e.email})]})]})}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("business"===e.user_type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:e.user_type||"individual"})}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[e.is_suspended?(0,n.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-700 w-fit",children:"Suspended"}):"verified"===e.verification_status?(0,n.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700 w-fit flex items-center gap-1",children:[(0,n.jsx)(x.Z,{className:"w-3 h-3"}),"Verified"]}):(0,n.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-neutral-100 text-neutral-700 w-fit",children:e.verification_status||"Unverified"}),e.is_admin&&(0,n.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-amber-100 text-amber-700 w-fit",children:"Admin"})]})}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("great"===e.borrower_rating?"bg-green-100 text-green-700":"good"===e.borrower_rating?"bg-blue-100 text-blue-700":"poor"===e.borrower_rating?"bg-yellow-100 text-yellow-700":"bad"===e.borrower_rating?"bg-orange-100 text-orange-700":"worst"===e.borrower_rating?"bg-red-100 text-red-700":"bg-neutral-100 text-neutral-700"),children:e.borrower_rating||"N/A"})}),(0,n.jsx)("td",{className:"px-6 py-4 text-sm text-neutral-500",children:(0,l.p6)(e.created_at)}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)("button",{onClick:()=>{M(e),C(!0)},className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-lg",title:"View Details",children:(0,n.jsx)(m.Z,{className:"w-4 h-4"})}),(0,n.jsx)("button",{onClick:()=>E(e.id,e.is_suspended||!1),className:"p-2 rounded-lg ".concat(e.is_suspended?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"),title:e.is_suspended?"Unsuspend":"Suspend",children:e.is_suspended?(0,n.jsx)(x.Z,{className:"w-4 h-4"}):(0,n.jsx)(h,{className:"w-4 h-4"})}),(0,n.jsx)("button",{onClick:()=>U(e.id,e.is_admin||!1),className:"p-2 rounded-lg ".concat(e.is_admin?"text-amber-600 hover:bg-amber-50":"text-neutral-500 hover:bg-neutral-100"),title:e.is_admin?"Remove Admin":"Make Admin",children:(0,n.jsx)(c.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-t border-neutral-200",children:[(0,n.jsxs)("p",{className:"text-sm text-neutral-500",children:["Showing ",(v-1)*20+1," to ",Math.min(20*v,k)," of ",k," users"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>w(v-1),disabled:1===v,className:"p-2 rounded-lg border border-neutral-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-neutral-50",children:(0,n.jsx)(p.Z,{className:"w-4 h-4"})}),(0,n.jsxs)("span",{className:"text-sm text-neutral-600",children:["Page ",v," of ",D]}),(0,n.jsx)("button",{onClick:()=>w(v+1),disabled:v>=D,className:"p-2 rounded-lg border border-neutral-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-neutral-50",children:(0,n.jsx)(f.Z,{className:"w-4 h-4"})})]})]})]}),S&&Z&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,n.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center ".concat(Z.is_admin?"bg-amber-100":"bg-primary-100"),children:Z.is_admin?(0,n.jsx)(c.Z,{className:"w-8 h-8 text-amber-600"}):(0,n.jsx)(o.Z,{className:"w-8 h-8 text-primary-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:Z.full_name}),(0,n.jsx)("p",{className:"text-neutral-500",children:Z.email})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"User ID"}),(0,n.jsx)("p",{className:"font-mono text-sm truncate",children:Z.id})]}),(0,n.jsxs)("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Type"}),(0,n.jsx)("p",{className:"font-medium",children:Z.user_type})]}),(0,n.jsxs)("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Phone"}),(0,n.jsx)("p",{className:"font-medium",children:Z.phone||"Not set"})]}),(0,n.jsxs)("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Rating"}),(0,n.jsx)("p",{className:"font-medium",children:Z.borrower_rating||"N/A"})]}),(0,n.jsxs)("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Verification"}),(0,n.jsx)("p",{className:"font-medium",children:Z.verification_status||"Pending"})]}),(0,n.jsxs)("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Joined"}),(0,n.jsx)("p",{className:"font-medium",children:(0,l.p6)(Z.created_at)})]})]}),(0,n.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,n.jsx)("button",{onClick:()=>{E(Z.id,Z.is_suspended||!1),C(!1)},className:"flex-1 py-2 rounded-lg font-medium ".concat(Z.is_suspended?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"),children:Z.is_suspended?"Unsuspend User":"Suspend User"}),(0,n.jsx)("button",{onClick:()=>C(!1),className:"flex-1 py-2 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50",children:"Close"})]})]})]})})]})}},8933:function(e,t,s){"use strict";s.d(t,{e:function(){return r}});var n=s(4033);function r(){return(0,n.createBrowserClient)("https://mregojhoivbxdvgjrixz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1yZWdvamhvaXZieGR2Z2pyaXh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc1ODE1NDQsImV4cCI6MjA4MzE1NzU0NH0.I_jEMf00cFYAdF0akvD-HOqXWExxO3E0BV69EHEa5jI")}},3448:function(e,t,s){"use strict";s.d(t,{K2:function(){return b},QT:function(){return f},U6:function(){return j},VO:function(){return p},aT:function(){return g},cn:function(){return c},p6:function(){return o},rl:function(){return m},xG:function(){return u},yv:function(){return h},zg:function(){return x}});var n=s(1994),r=s(3335),a=s(2093),l=s(5710),i=s(9121),d=s(3430);function c(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,n.W)(t))}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(e)}function o(e){return(0,a.WU)(new Date(e),"MMM d, yyyy")}function x(e){return(0,l.Q)(new Date(e),{addSuffix:!0})}function m(e){return"".concat(e.toFixed(2),"%")}function h(e,t){if(t)return"paid";let s=new Date(e),n=new Date,r=(0,i.E)(n,3);return(0,d.R)(s,n)?"overdue":(0,d.R)(s,r)?"due":"upcoming"}function p(e,t){return 0===t?0:Math.round(e/t*100)}function f(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="";for(let s=0;s<32;s++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function g(e,t,s,n){return 0===t?0:"simple"===n?t/100/12*e*s:function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12;return e*Math.pow(1+t/100/n,s/12*n)-e}(e,t,s)}function b(e,t){switch(t){case"weekly":return e/4.33;case"biweekly":return e/2.17;default:return e}}function j(e){let{amount:t,repaymentAmount:s,totalInstallments:n,startDate:r,frequency:a,interestRate:l=0,interestType:d="simple"}=e,c=[],u=g(t,l,b(n,a),d),o=u/n,x=t/n,m=new Date(r),h=t,p=u;for(let e=0;e<n;e++){let t=e===n-1,s=t?h:Math.min(x,h),r=t?p:Math.min(o,p),l=s+r;switch(c.push({dueDate:new Date(m),amount:Math.round(100*l)/100,principalAmount:Math.round(100*s)/100,interestAmount:Math.round(100*r)/100}),h-=s,p-=r,a){case"weekly":m=(0,i.E)(m,7);break;case"biweekly":m=(0,i.E)(m,14);break;case"monthly":m.setMonth(m.getMonth()+1);break;default:m=(0,i.E)(m,30)}}return c}}},function(e){e.O(0,[1114,4033,2971,2117,1744],function(){return e(e.s=7378)}),_N_E=e.O()}]);