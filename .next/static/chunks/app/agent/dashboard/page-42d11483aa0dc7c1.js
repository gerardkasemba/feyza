(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{1791:function(e,t,s){Promise.resolve().then(s.bind(s,6583))},2252:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3681:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},8420:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},44:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},875:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9637:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},3245:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7168:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3388:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},6583:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var n=s(7437),a=s(2265),r=s(9376),l=s(7648),i=s(2573),c=s(3448),d=s(3388),u=s(44),o=s(3681);let h=(0,s(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var x=s(8420),p=s(7692),m=s(1723),f=s(7168),y=s(5302),g=s(2252),j=s(3247),k=s(2369),v=s(3774),b=s(407);function N(){let e=(0,r.useRouter)(),[t,s]=(0,a.useState)(null),[N,w]=(0,a.useState)([]),[Z,_]=(0,a.useState)({pending:0,processing:0,ready_for_pickup:0,completed:0,failed:0}),[M,C]=(0,a.useState)(!0),[P,z]=(0,a.useState)(!1),[D,S]=(0,a.useState)(""),[L,q]=(0,a.useState)(""),[A,E]=(0,a.useState)("");(0,a.useEffect)(()=>{R(),H()},[D,L]);let R=async()=>{try{let t=await fetch("/api/agent/auth");if(!t.ok){e.push("/agent/login");return}let n=await t.json();s(n.agent)}catch(t){e.push("/agent/login")}},H=async()=>{try{z(!0);let e="/api/agent/disbursements?";D&&(e+="status=".concat(D,"&")),L&&(e+="method=".concat(L,"&"));let t=await fetch(e);if(t.ok){let e=await t.json();w(e.disbursements||[]),_(e.stats||Z)}}catch(e){console.error("Failed to fetch disbursements:",e)}finally{C(!1),z(!1)}},F=async()=>{await fetch("/api/agent/auth",{method:"DELETE"}),e.push("/agent/login")},B=e=>{let t={pending:{variant:"danger",label:"\uD83D\uDD34 Needs Action"},processing:{variant:"warning",label:"\uD83D\uDFE1 Processing"},ready_for_pickup:{variant:"warning",label:"\uD83D\uDFE0 Awaiting Pickup"},completed:{variant:"success",label:"✅ Completed"},failed:{variant:"danger",label:"❌ Failed"},on_hold:{variant:"default",label:"⏸️ On Hold"}},s=t[e]||t.pending;return(0,n.jsx)(i.Ct,{variant:s.variant,children:s.label})},O=e=>{switch(e){case"mobile_money":return(0,n.jsx)(d.Z,{className:"w-4 h-4"});case"bank_transfer":return(0,n.jsx)(u.Z,{className:"w-4 h-4"});case"cash_pickup":return(0,n.jsx)(o.Z,{className:"w-4 h-4"});default:return(0,n.jsx)(h,{className:"w-4 h-4"})}},V=N.filter(e=>{var t,s,n,a;if(!A)return!0;let r=A.toLowerCase();return e.recipient_name.toLowerCase().includes(r)||(null===(n=e.loan)||void 0===n?void 0:null===(s=n.borrower)||void 0===s?void 0:null===(t=s.full_name)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(a=e.pickup_code)||void 0===a?void 0:a.toLowerCase().includes(r))});return M?(0,n.jsx)("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full"})}):(0,n.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,n.jsx)("header",{className:"bg-white border-b border-neutral-200 sticky top-0 z-50",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(x.Z,{className:"w-5 h-5 text-primary-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"font-bold text-neutral-900",children:"Agent Dashboard"}),(0,n.jsxs)("p",{className:"text-xs text-neutral-500",children:[null==t?void 0:t.full_name," • ",(null==t?void 0:t.country)||"All Regions"]})]})]}),(0,n.jsxs)(i.zx,{variant:"outline",size:"sm",onClick:F,children:[(0,n.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Logout"]})]})})}),(0,n.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[(0,n.jsx)(i.Zb,{className:"cursor-pointer transition-all ".concat("pending"===D?"ring-2 ring-yellow-500":""),onClick:()=>S("pending"===D?"":"pending"),children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(m.Z,{className:"w-5 h-5 text-yellow-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:Z.pending}),(0,n.jsx)("p",{className:"text-xs text-neutral-500",children:"Pending"})]})]})}),(0,n.jsx)(i.Zb,{className:"cursor-pointer transition-all ".concat("processing"===D?"ring-2 ring-blue-500":""),onClick:()=>S("processing"===D?"":"processing"),children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(f.Z,{className:"w-5 h-5 text-blue-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:Z.processing}),(0,n.jsx)("p",{className:"text-xs text-neutral-500",children:"Processing"})]})]})}),(0,n.jsx)(i.Zb,{className:"cursor-pointer transition-all ".concat("ready_for_pickup"===D?"ring-2 ring-orange-500":""),onClick:()=>S("ready_for_pickup"===D?"":"ready_for_pickup"),children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"w-5 h-5 text-orange-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:Z.ready_for_pickup}),(0,n.jsx)("p",{className:"text-xs text-neutral-500",children:"Ready"})]})]})}),(0,n.jsx)(i.Zb,{className:"cursor-pointer transition-all ".concat("completed"===D?"ring-2 ring-green-500":""),onClick:()=>S("completed"===D?"":"completed"),children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(y.Z,{className:"w-5 h-5 text-green-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:Z.completed}),(0,n.jsx)("p",{className:"text-xs text-neutral-500",children:"Completed"})]})]})}),(0,n.jsx)(i.Zb,{className:"cursor-pointer transition-all ".concat("failed"===D?"ring-2 ring-red-500":""),onClick:()=>S("failed"===D?"":"failed"),children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(g.Z,{className:"w-5 h-5 text-red-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:Z.failed}),(0,n.jsx)("p",{className:"text-xs text-neutral-500",children:"Failed"})]})]})})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,n.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(j.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),(0,n.jsx)("input",{type:"text",placeholder:"Search by recipient, borrower, or pickup code...",value:A,onChange:e=>E(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,n.jsxs)("select",{value:L,onChange:e=>q(e.target.value),className:"px-4 py-2 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary-500",children:[(0,n.jsx)("option",{value:"",children:"All Methods"}),(0,n.jsx)("option",{value:"mobile_money",children:"Mobile Money"}),(0,n.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,n.jsx)("option",{value:"cash_pickup",children:"Cash Pickup"})]}),(0,n.jsxs)(i.zx,{variant:"outline",onClick:()=>H(),loading:P,children:[(0,n.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),(0,n.jsx)("div",{className:"space-y-4",children:0===V.length?(0,n.jsxs)(i.Zb,{className:"text-center py-12",children:[(0,n.jsx)(h,{className:"w-12 h-12 text-neutral-300 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-neutral-500",children:"No disbursements found"}),(D||L||A)&&(0,n.jsx)(i.zx,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>{S(""),q(""),E("")},children:"Clear Filters"})]}):V.map(e=>{var t,s;return(0,n.jsx)(l.default,{href:"/agent/disbursements/".concat(e.id),children:(0,n.jsx)(i.Zb,{className:"hover:shadow-md transition-shadow cursor-pointer",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat("mobile_money"===e.disbursement_method?"bg-purple-100 text-purple-600":"bank_transfer"===e.disbursement_method?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"),children:O(e.disbursement_method)}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("p",{className:"font-semibold text-neutral-900",children:e.recipient_name}),B(e.status)]}),(0,n.jsxs)("div",{className:"flex items-center gap-4 text-sm text-neutral-500 mt-1",children:[(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(k.Z,{className:"w-3 h-3"}),(null===(s=e.loan)||void 0===s?void 0:null===(t=s.borrower)||void 0===t?void 0:t.full_name)||"Unknown borrower"]}),e.recipient_country&&(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(v.Z,{className:"w-3 h-3"}),e.recipient_country]}),e.pickup_code&&(0,n.jsx)("span",{className:"font-mono bg-neutral-100 px-2 py-0.5 rounded",children:e.pickup_code})]})]})]}),(0,n.jsxs)("div",{className:"text-right flex items-center gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-lg font-bold text-neutral-900",children:(0,c.xG)(e.amount,e.currency)}),(0,n.jsx)("p",{className:"text-xs text-neutral-400",children:new Date(e.created_at).toLocaleDateString()})]}),(0,n.jsx)(b.Z,{className:"w-5 h-5 text-neutral-400"})]})]})})},e.id)})})]})]})}}},function(e){e.O(0,[1114,7648,2573,2971,2117,1744],function(){return e(e.s=1791)}),_N_E=e.O()}]);