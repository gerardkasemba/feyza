(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8164],{2250:function(e,t,l){Promise.resolve().then(l.bind(l,6365))},2252:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1047:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},875:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2451:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1723:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8226:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},5252:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},6362:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},8736:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},9637:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},3245:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9089:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]])},2369:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5131:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2489:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});let s=(0,l(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,l){"use strict";var s=l(5475);l.o(s,"useParams")&&l.d(t,{useParams:function(){return s.useParams}}),l.o(s,"usePathname")&&l.d(t,{usePathname:function(){return s.usePathname}}),l.o(s,"useRouter")&&l.d(t,{useRouter:function(){return s.useRouter}}),l.o(s,"useSearchParams")&&l.d(t,{useSearchParams:function(){return s.useSearchParams}})},6365:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return k}});var s=l(7437),n=l(2265),a=l(9376),r=l(7648),i=l(2573),c=l(8933),d=l(3448),o=l(5131),u=l(5302),x=l(2252),m=l(2369),h=l(1047),p=l(1723),y=l(3774),f=l(407),j=l(2451),v=l(9089),b=l(8736),N=l(8226),g=l(5252),w=l(6362);function k(){let e=(0,a.useParams)();(0,a.useRouter)();let t=e.token,[l,k]=(0,n.useState)(null),[Z,P]=(0,n.useState)(null),[_,C]=(0,n.useState)(!0),[I,S]=(0,n.useState)(null),[z,q]=(0,n.useState)(!1),[R,F]=(0,n.useState)(!1),[G,M]=(0,n.useState)(!1),[E,T]=(0,n.useState)(1),[A,L]=(0,n.useState)(null),[D,H]=(0,n.useState)(""),[Y,O]=(0,n.useState)(0),[B,J]=(0,n.useState)("simple"),[U,X]=(0,n.useState)(!1),[V,W]=(0,n.useState)(""),[Q,K]=(0,n.useState)(!1),[$,ee]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{let e=(0,c.e)(),{data:l,error:s}=await e.from("loans").select("\n          *,\n          borrower:users!borrower_id(*)\n        ").eq("invite_token",t).single();if(s||!l){S("This invite link is invalid or has expired."),C(!1);return}if(l.invite_accepted){S("This loan request has already been accepted."),C(!1);return}if("declined"===l.status||"cancelled"===l.status){S("This loan request is no longer available."),C(!1);return}if(!l.borrower_signed){S("The borrower has not yet signed the agreement. Please wait for them to complete their part."),C(!1);return}k(l),P(l.borrower),C(!1)})()},[t]);let et=l?(0,d.K2)(l.total_installments,l.repayment_frequency):0,el=(0,d.aT)((null==l?void 0:l.amount)||0,Y,et,B),es=((null==l?void 0:l.amount)||0)+el,en=l?es/l.total_installments:0,ea=()=>!0,er=()=>V.trim()?D&&D.includes("@")?!!U||(L("Please accept the agreement to proceed"),!1):(L("Please enter a valid PayPal email"),!1):(L("Please enter your full name"),!1),ei=e=>{L(null);let t=!0;2===E&&(t=ea()),3===E&&(t=er()),t&&T(e)},ec=async()=>{K(!0),L(null);try{let e=await fetch("/api/invite/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,paypalEmail:D,lenderName:V,interestRate:Y,interestType:B,paymentCompleted:!0})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to complete")}ee(!0),F(!0)}catch(e){L(e.message||"Failed to complete. Please try again.")}finally{K(!1)}},ed=async()=>{if(l){q(!0);try{if(!(await fetch("/api/invite/decline",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})})).ok)throw Error("Failed to decline loan");M(!0)}catch(e){S("Failed to decline the loan. Please try again.")}finally{q(!1)}}};if(_)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-accent-50",children:(0,s.jsx)("div",{className:"animate-pulse text-neutral-500",children:"Loading..."})});if(I)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-accent-50 p-4",children:(0,s.jsxs)(i.Zb,{className:"max-w-md w-full text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"w-8 h-8 text-red-600"})}),(0,s.jsx)("h1",{className:"text-2xl font-display font-bold text-neutral-900 mb-2",children:"Unable to Process"}),(0,s.jsx)("p",{className:"text-neutral-500 mb-6",children:I}),(0,s.jsx)(r.default,{href:"/",children:(0,s.jsx)(i.zx,{variant:"outline",children:"Go to Homepage"})})]})});if(R)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-accent-50 p-4",children:(0,s.jsxs)(i.Zb,{className:"max-w-md w-full text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 text-green-600"})}),(0,s.jsx)("h1",{className:"text-2xl font-display font-bold text-neutral-900 mb-2",children:"Loan Funded! \uD83C\uDF89"}),(0,s.jsxs)("p",{className:"text-neutral-500 mb-4",children:["You've successfully sent ",(0,d.xG)((null==l?void 0:l.amount)||0,null==l?void 0:l.currency)," to ",null==Z?void 0:Z.full_name,"."]}),Y>0&&(0,s.jsxs)("p",{className:"text-neutral-500 mb-4",children:["With ",Y,"% APR interest, they will repay ",(0,d.xG)(es,null==l?void 0:l.currency),"."]}),(0,s.jsx)("div",{className:"bg-primary-50 rounded-xl p-4 mb-6",children:(0,s.jsxs)("p",{className:"text-sm text-primary-800",children:[(0,s.jsx)("strong",{children:"Next:"})," ",null==Z?void 0:Z.full_name," will make ",null==l?void 0:l.total_installments," payments of ",(0,d.xG)(en,null==l?void 0:l.currency)," (",null==l?void 0:l.repayment_frequency,") to your PayPal."]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(r.default,{href:"/lender/access",children:(0,s.jsx)(i.zx,{className:"w-full",children:"Access Your Dashboard"})}),(0,s.jsx)(r.default,{href:"/auth/signup",children:(0,s.jsx)(i.zx,{variant:"outline",className:"w-full",children:"Create Full Account"})})]})]})});if(G)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-accent-50 p-4",children:(0,s.jsxs)(i.Zb,{className:"max-w-md w-full text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 bg-neutral-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"w-8 h-8 text-neutral-500"})}),(0,s.jsx)("h1",{className:"text-2xl font-display font-bold text-neutral-900 mb-2",children:"Loan Declined"}),(0,s.jsxs)("p",{className:"text-neutral-500 mb-6",children:["You've declined the loan request. ",null==Z?void 0:Z.full_name," will be notified."]}),(0,s.jsx)(r.default,{href:"/",children:(0,s.jsx)(i.zx,{variant:"outline",children:"Go to Homepage"})})]})});let eo=(()=>{let e=null==Z?void 0:Z.paypal_email;if(!e||!l)return null;let t=l.amount,s=l.currency||"USD";return"https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=".concat(encodeURIComponent(e),"&amount=").concat(t,"&currency_code=").concat(s,"&item_name=").concat(encodeURIComponent("Loan to ".concat(null==Z?void 0:Z.full_name)))})();return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-accent-50 p-4 py-12",children:(0,s.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-white font-bold text-xl",children:"L"})}),(0,s.jsx)("h1",{className:"text-2xl font-display font-bold text-neutral-900",children:"Loan Request"}),(0,s.jsx)("p",{className:"text-neutral-500 mt-1",children:"from Feyza"})]}),(0,s.jsx)("div",{className:"flex items-center justify-center gap-2 mb-6",children:[1,2,3,4].map(e=>(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(e===E?"bg-primary-500 text-white":e<E?"bg-green-500 text-white":"bg-neutral-200 text-neutral-500"),children:e<E?(0,s.jsx)(u.Z,{className:"w-5 h-5"}):e},e))}),(0,s.jsxs)("div",{className:"flex justify-center gap-8 text-xs text-neutral-500 mb-6",children:[(0,s.jsx)("span",{children:"Review"}),(0,s.jsx)("span",{children:"Interest"}),(0,s.jsx)("span",{children:"Agreement"}),(0,s.jsx)("span",{children:"Payment"})]}),A&&(0,s.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-red-700",children:A})]}),(0,s.jsxs)(i.Zb,{className:"animate-fade-in",children:[1===E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6 pb-6 border-b border-neutral-100",children:[(0,s.jsx)("div",{className:"w-14 h-14 bg-primary-100 rounded-xl flex items-center justify-center",children:(0,s.jsx)(m.Z,{className:"w-7 h-7 text-primary-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Request from"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:null==Z?void 0:Z.full_name}),(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:null==Z?void 0:Z.email})]})]}),(0,s.jsxs)("div",{className:"text-center py-6 bg-primary-50 rounded-2xl mb-6",children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500 mb-2",children:"Requesting to borrow"}),(0,s.jsx)("p",{className:"text-4xl font-bold text-primary-600",children:(0,d.xG)((null==l?void 0:l.amount)||0,(null==l?void 0:l.currency)||"USD")})]}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[(null==l?void 0:l.purpose)&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 text-neutral-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Purpose"}),(0,s.jsx)("p",{className:"text-neutral-900",children:l.purpose})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 text-neutral-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Repayment Plan"}),(0,s.jsxs)("p",{className:"text-neutral-900",children:[null==l?void 0:l.total_installments," ",null==l?void 0:l.repayment_frequency," payments"]})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-neutral-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"First Payment Date"}),(0,s.jsx)("p",{className:"text-neutral-900",children:(0,d.p6)((null==l?void 0:l.start_date)||"")})]})]}),(null==l?void 0:l.pickup_person_name)&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(y.Z,{className:"w-5 h-5 text-neutral-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Recipient (in Africa)"}),(0,s.jsx)("p",{className:"text-neutral-900",children:l.pickup_person_name}),l.pickup_person_location&&(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:l.pickup_person_location})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(i.zx,{variant:"outline",className:"flex-1",onClick:ed,loading:z,children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Decline"]}),(0,s.jsxs)(i.zx,{className:"flex-1",onClick:()=>T(2),children:["Continue",(0,s.jsx)(f.Z,{className:"w-4 h-4 ml-2"})]})]})]}),2===E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>T(1),className:"flex items-center gap-1 text-sm text-neutral-500 hover:text-neutral-700 mb-6",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4"}),"Back"]}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(v.Z,{className:"w-8 h-8 text-orange-600"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Set Interest Rate"}),(0,s.jsx)("p",{className:"text-neutral-500",children:"As the lender, you decide the interest rate (optional)"})]}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(i.II,{label:"Interest Rate (% APR)",type:"number",min:"0",max:"100",step:"0.5",value:Y,onChange:e=>O(parseFloat(e.target.value)||0),placeholder:"0"}),(0,s.jsx)(i.Ph,{label:"Interest Type",value:B,onChange:e=>J(e.target.value),options:[{value:"simple",label:"Simple"},{value:"compound",label:"Compound"}]})]}),(0,s.jsxs)("div",{className:"bg-neutral-50 rounded-xl p-4 space-y-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-neutral-900",children:"Repayment Summary"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-neutral-500",children:"You send now:"}),(0,s.jsx)("span",{className:"text-right font-bold text-primary-600",children:(0,d.xG)((null==l?void 0:l.amount)||0,null==l?void 0:l.currency)}),Y>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-neutral-500",children:"Interest earned:"}),(0,s.jsxs)("span",{className:"text-right text-green-600",children:["+",(0,d.xG)(el,null==l?void 0:l.currency)]})]}),(0,s.jsx)("span",{className:"text-neutral-500 font-medium",children:"Total you'll receive:"}),(0,s.jsx)("span",{className:"text-right font-bold",children:(0,d.xG)(es,null==l?void 0:l.currency)}),(0,s.jsx)("span",{className:"text-neutral-500",children:"Per payment:"}),(0,s.jsxs)("span",{className:"text-right",children:[(0,d.xG)(en,null==l?void 0:l.currency)," \xd7 ",null==l?void 0:l.total_installments]})]})]}),(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:(0,s.jsxs)("p",{className:"text-sm text-green-800",children:[(0,s.jsx)("strong",{children:"Tip:"})," 0% interest is common for loans between friends and family."]})})]}),(0,s.jsxs)(i.zx,{className:"w-full",onClick:()=>ei(3),children:["Continue",(0,s.jsx)(f.Z,{className:"w-4 h-4 ml-2"})]})]}),3===E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>T(2),className:"flex items-center gap-1 text-sm text-neutral-500 hover:text-neutral-700 mb-6",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4"}),"Back"]}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(b.Z,{className:"w-8 h-8 text-purple-600"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Sign Agreement"}),(0,s.jsx)("p",{className:"text-neutral-500",children:"Review terms and provide your details"})]}),(0,s.jsxs)("div",{className:"bg-neutral-50 rounded-xl p-4 mb-4 space-y-3",children:[(0,s.jsx)("h4",{className:"font-semibold text-neutral-900",children:"Loan Terms"}),(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Borrower:"})," ",null==Z?void 0:Z.full_name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"You send:"})," ",(0,d.xG)((null==l?void 0:l.amount)||0,null==l?void 0:l.currency)]}),Y>0&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Interest Rate:"})," ",Y,"% APR (",B,")"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"You receive back:"})," ",(0,d.xG)(es,null==l?void 0:l.currency)]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"In:"})," ",null==l?void 0:l.total_installments," ",null==l?void 0:l.repayment_frequency," payments"]})]})]}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,s.jsx)(i.II,{label:"Your Full Legal Name",value:V,onChange:e=>W(e.target.value),placeholder:"Enter your full name"}),(0,s.jsx)(i.II,{label:"Your PayPal Email (to receive repayments)",type:"email",value:D,onChange:e=>H(e.target.value),placeholder:"your@paypal.com",icon:(0,s.jsx)(N.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:U,onChange:e=>X(e.target.checked),className:"mt-1 w-5 h-5 rounded border-neutral-300 text-primary-600 focus:ring-primary-500"}),(0,s.jsxs)("span",{className:"text-sm text-neutral-600",children:["I, ",(0,s.jsx)("strong",{children:V||"[Your Name]"}),", agree to lend ",(0,d.xG)((null==l?void 0:l.amount)||0,null==l?void 0:l.currency)," to ",null==Z?void 0:Z.full_name,". I understand they will repay ",(0,d.xG)(es,null==l?void 0:l.currency)," to my PayPal (",D||"[your email]",")."]})]})]}),(0,s.jsxs)(i.zx,{className:"w-full",onClick:()=>ei(4),disabled:!U||!V||!D,children:["Continue to Payment",(0,s.jsx)(f.Z,{className:"w-4 h-4 ml-2"})]})]}),4===E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>T(3),className:"flex items-center gap-1 text-sm text-neutral-500 hover:text-neutral-700 mb-6",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4"}),"Back"]}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(g.Z,{className:"w-8 h-8 text-green-600"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Send Payment"}),(0,s.jsxs)("p",{className:"text-neutral-500",children:["Send ",(0,d.xG)((null==l?void 0:l.amount)||0,null==l?void 0:l.currency)," to ",null==Z?void 0:Z.full_name]})]}),(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-green-700 mb-2",children:"Send to borrower's PayPal:"}),(0,s.jsx)("p",{className:"text-lg font-bold text-green-800",children:null==Z?void 0:Z.paypal_email}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:(0,d.xG)((null==l?void 0:l.amount)||0,null==l?void 0:l.currency)})]})}),eo&&(null==Z?void 0:Z.paypal_email)?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("a",{href:eo,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-[#0070ba] hover:bg-[#005ea6] text-white font-bold py-4 px-6 rounded-xl transition-colors",children:[(0,s.jsx)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.556.479l-1.187 7.527h-.506l-.24 1.516a.56.56 0 0 0 .554.647h3.882c.46 0 .85-.334.922-.788.06-.26.76-4.852.816-5.09a.932.932 0 0 1 .923-.788h.58c3.76 0 6.705-1.528 7.565-5.946.36-1.847.174-3.388-.777-4.471z"})}),"Pay with PayPal",(0,s.jsx)(w.Z,{className:"w-4 h-4"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500 mb-4",children:"After completing payment in PayPal, click below:"}),(0,s.jsxs)(i.zx,{className:"w-full",onClick:ec,loading:Q,children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"I've Completed the Payment"]})]})]}):(0,s.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-yellow-800",children:"PayPal not set up"}),(0,s.jsx)("p",{className:"text-sm text-yellow-700",children:"The borrower hasn't connected their PayPal account yet. Please contact them to set up PayPal before proceeding."})]})]})}),(0,s.jsxs)("div",{className:"mt-6 p-4 bg-neutral-50 rounded-xl",children:[(0,s.jsx)("h4",{className:"font-medium text-neutral-900 mb-2",children:"What happens next?"}),(0,s.jsxs)("ul",{className:"text-sm text-neutral-600 space-y-1",children:[(0,s.jsxs)("li",{children:["• ",null==Z?void 0:Z.full_name," receives ",(0,d.xG)((null==l?void 0:l.amount)||0,null==l?void 0:l.currency)," in their PayPal"]}),(0,s.jsxs)("li",{children:["• They will repay you ",(0,d.xG)(en,null==l?void 0:l.currency)," ",null==l?void 0:l.repayment_frequency]}),(0,s.jsxs)("li",{children:["• You'll receive payments to: ",D]}),(0,s.jsx)("li",{children:"• Both of you can track progress on Feyza"})]})]})]})]}),(0,s.jsx)("p",{className:"text-center text-sm text-neutral-500 mt-8",children:"Questions? Reply to the invite email or contact support."})]})})}},8933:function(e,t,l){"use strict";l.d(t,{e:function(){return n}});var s=l(4033);function n(){return(0,s.createBrowserClient)("https://mregojhoivbxdvgjrixz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1yZWdvamhvaXZieGR2Z2pyaXh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc1ODE1NDQsImV4cCI6MjA4MzE1NzU0NH0.I_jEMf00cFYAdF0akvD-HOqXWExxO3E0BV69EHEa5jI")}}},function(e){e.O(0,[1114,7648,4033,2573,2971,2117,1744],function(){return e(e.s=2250)}),_N_E=e.O()}]);