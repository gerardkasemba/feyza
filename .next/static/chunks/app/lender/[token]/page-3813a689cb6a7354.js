(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5740],{1554:function(e,t,s){Promise.resolve().then(s.bind(s,9373))},2252:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},6858:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},875:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8226:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},5252:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9637:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},3245:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},525:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},9373:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var n=s(7437),a=s(2265),l=s(9376),r=s(7648),c=s(2573),i=s(2252),d=s(8226),x=s(5252),u=s(525),o=s(1723),m=s(2369),h=s(6858),f=s(5302),p=s(3448);function j(){let e=(0,l.useParams)();(0,l.useRouter)();let t=e.token,[s,j]=(0,a.useState)(null),[y,N]=(0,a.useState)([]),[b,v]=(0,a.useState)(!0),[g,k]=(0,a.useState)(null),[Z,w]=(0,a.useState)(!1),[P,C]=(0,a.useState)(""),[_,z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&R()},[t]);let R=async()=>{try{var e;let s=await fetch("/api/guest-lender/".concat(t));if(!s.ok){404===s.status?k("Invalid or expired access link"):k("Failed to load your lending dashboard");return}let n=await s.json();j(n.lender),N(n.loans||[]),C((null===(e=n.lender)||void 0===e?void 0:e.paypal_email)||"")}catch(e){console.error("Error fetching lender data:",e),k("Failed to load your lending dashboard")}finally{v(!1)}},S=async()=>{if(P){z(!0);try{(await fetch("/api/guest-lender/".concat(t,"/paypal"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paypalEmail:P})})).ok&&(j(e=>e?{...e,paypal_email:P,paypal_connected:!0}:null),w(!1))}catch(e){console.error("Error saving PayPal:",e)}finally{z(!1)}}};if(b)return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:(0,n.jsx)("div",{className:"animate-pulse text-neutral-500",children:"Loading your dashboard..."})});if(g)return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:(0,n.jsxs)(c.Zb,{className:"max-w-md text-center",children:[(0,n.jsx)(i.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,n.jsx)("h1",{className:"text-xl font-bold text-neutral-900 mb-2",children:g}),(0,n.jsx)("p",{className:"text-neutral-500 mb-4",children:"This link may have expired or is no longer valid."}),(0,n.jsx)(r.default,{href:"/",children:(0,n.jsx)(c.zx,{children:"Go to Homepage"})})]})});let q=y.filter(e=>"active"===e.status),M=y.filter(e=>"pending"===e.status),A=y.filter(e=>"completed"===e.status),E=y.reduce((e,t)=>"declined"!==t.status&&"cancelled"!==t.status?e+t.amount:e,0),L=y.reduce((e,t)=>e+t.amount_paid,0);return(0,n.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,n.jsx)("div",{className:"bg-white border-b border-neutral-200",children:(0,n.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-neutral-900",children:"Your Lending Dashboard"}),(0,n.jsxs)("p",{className:"text-neutral-500",children:["Welcome back, ",(null==s?void 0:s.full_name)||(null==s?void 0:s.email)]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[!(null==s?void 0:s.paypal_connected)&&(0,n.jsxs)(c.zx,{onClick:()=>w(!0),variant:"outline",children:[(0,n.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Connect PayPal"]}),(0,n.jsx)(r.default,{href:"/auth/signup",children:(0,n.jsx)(c.zx,{children:"Create Full Account"})})]})]})})}),(0,n.jsxs)("main",{className:"max-w-6xl mx-auto px-4 py-8",children:[!(null==s?void 0:s.paypal_connected)&&(0,n.jsxs)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex items-start gap-3",children:[(0,n.jsx)(i.Z,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium text-yellow-800",children:"Connect PayPal to receive payments"}),(0,n.jsx)("p",{className:"text-sm text-yellow-700",children:"You need to connect your PayPal account to receive loan repayments automatically."}),(0,n.jsx)(c.zx,{size:"sm",className:"mt-2",onClick:()=>w(!0),children:"Connect Now"})]})]}),(0,n.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[(0,n.jsx)(c.Zb,{children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(x.Z,{className:"w-6 h-6 text-green-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Total Lent"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:(0,p.xG)(E)})]})]})}),(0,n.jsx)(c.Zb,{children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(u.Z,{className:"w-6 h-6 text-blue-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Received Back"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:(0,p.xG)(L)})]})]})}),(0,n.jsx)(c.Zb,{children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"w-6 h-6 text-purple-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Active Loans"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:q.length})]})]})}),(0,n.jsx)(c.Zb,{children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:(0,n.jsx)(i.Z,{className:"w-6 h-6 text-orange-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Pending Requests"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:M.length})]})]})})]}),M.length>0&&(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Pending Requests"}),(0,n.jsx)("div",{className:"space-y-4",children:M.map(e=>(0,n.jsx)(c.Zb,{className:"border-orange-200 bg-orange-50",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(m.Z,{className:"w-6 h-6 text-orange-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold text-neutral-900",children:e.borrower_name}),(0,n.jsxs)("p",{className:"text-sm text-neutral-500",children:["Requested ",(0,p.xG)(e.amount,e.currency)," â€¢ ",(0,p.p6)(e.created_at)]})]})]}),(0,n.jsx)(r.default,{href:"/invite/".concat(t,"?loan=").concat(e.id),children:(0,n.jsxs)(c.zx,{children:["Review Request",(0,n.jsx)(h.Z,{className:"w-4 h-4 ml-2"})]})})]})},e.id))})]}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Active Loans"}),q.length>0?(0,n.jsx)("div",{className:"space-y-4",children:q.map(e=>(0,n.jsx)(c.Zb,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(m.Z,{className:"w-6 h-6 text-green-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold text-neutral-900",children:e.borrower_name}),(0,n.jsxs)("p",{className:"text-sm text-neutral-500",children:[(0,p.xG)(e.amount,e.currency)," @ ",e.interest_rate,"% APR"]})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"Remaining"}),(0,n.jsx)("p",{className:"text-lg font-bold text-primary-600",children:(0,p.xG)(e.amount_remaining,e.currency)}),(0,n.jsx)("div",{className:"w-32 h-2 bg-neutral-200 rounded-full mt-2",children:(0,n.jsx)("div",{className:"h-full bg-green-500 rounded-full",style:{width:"".concat(e.amount_paid/e.total_amount*100,"%")}})})]})]})},e.id))}):(0,n.jsxs)(c.Zb,{className:"text-center py-8",children:[(0,n.jsx)(o.Z,{className:"w-12 h-12 text-neutral-300 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-neutral-500",children:"No active loans"})]})]}),A.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Completed Loans"}),(0,n.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,n.jsx)(c.Zb,{className:"opacity-75",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-neutral-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(f.Z,{className:"w-6 h-6 text-green-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold text-neutral-900",children:e.borrower_name}),(0,n.jsxs)("p",{className:"text-sm text-neutral-500",children:[(0,p.xG)(e.total_amount,e.currency)," fully repaid"]})]})]}),(0,n.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"Completed"})]})},e.id))})]}),(0,n.jsx)(c.Zb,{className:"mt-8 bg-gradient-to-r from-primary-500 to-primary-600 text-white",children:(0,n.jsxs)("div",{className:"text-center py-4",children:[(0,n.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Want more features?"}),(0,n.jsx)("p",{className:"text-primary-100 mb-4",children:"Create a full account to track all your loans, set up automatic payments, and more."}),(0,n.jsx)(r.default,{href:"/auth/signup",children:(0,n.jsx)(c.zx,{variant:"secondary",children:"Create Free Account"})})]})})]}),Z&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,n.jsxs)(c.Zb,{className:"max-w-md w-full",children:[(0,n.jsx)("h3",{className:"text-lg font-bold text-neutral-900 mb-4",children:"Connect PayPal"}),(0,n.jsx)("p",{className:"text-sm text-neutral-500 mb-4",children:"Enter your PayPal email address to receive loan repayments."}),(0,n.jsx)(c.II,{label:"PayPal Email",type:"email",value:P,onChange:e=>C(e.target.value),placeholder:"your@email.com"}),(0,n.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,n.jsx)(c.zx,{variant:"outline",onClick:()=>w(!1),className:"flex-1",children:"Cancel"}),(0,n.jsx)(c.zx,{onClick:S,loading:_,className:"flex-1",children:"Save"})]})]})})]})}}},function(e){e.O(0,[1114,7648,2573,2971,2117,1744],function(){return e(e.s=1554)}),_N_E=e.O()}]);